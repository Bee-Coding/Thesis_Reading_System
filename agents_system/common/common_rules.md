# Thesis_Reading_System 通用规则库 (Common Rules)

## 数据真实性核心规则（所有Agent必须遵守）

### Rule-1: 绝对禁止模拟数据与伪代码
- **原则**：严格基于原始论文和源码，禁止生成任何“模拟数据”、“占位符”、“示例代码”或AI虚构内容
- **要求**：所有产出必须源自上传的论文PDF或GitHub源码链接
- **违反后果**：丢弃模拟数据，记录违规，生成降级报告

### Rule-2: 强制引用锚定原则
- **原则**：所有产出必须附带具体出处锚定
- **要求**：
  - **数学公式**：必须标明论文页码和公式编号（如：Page 5, Eq. 4）
  - **代码实现**：必须标明GitHub仓库的具体文件路径和大致行号（如：`github.com/user/repo/blob/main/model.py#L88-L120`）
  - **场景描述**：必须基于真实AVP物理约束，禁止虚构“示例场景”
- **验证**：无锚定的产出不得入库，标记为`Unverified`

### Rule-3: 技术领域纯粹性原则
- **原则**：严格执行绝对专注原则，禁止学科交叉干扰
- **要求**：
  - 禁止引入生物学、化学、哲学等非智驾领域的类比或术语
  - 保持技术讨论的纯粹性，专注于自动驾驶工程实现
  - 使用标准的智驾领域术语（如：AVP、BEV、Diffusion Planner、TensorRT等）

### Rule-4: 去中心化存储原则
- **原则**：打破论文边界，按功能构建复利资产
- **要求**：
  - 禁止在`/atoms/`目录下建立以论文命名的子文件夹
  - 所有资产必须按功能分类存储到相应目录（`math_ops/`, `code_snippets/`, `scenarios/`）
  - 维护统一的`algorithm_atlas.md`技术演进地图

### Rule-5: 无源则无果原则
- **原则**：文献未提及则不可编造
- **要求**：
  - 如果论文未提供某个参数或细节，必须明确回答“文献未提及”
  - 严禁使用训练集旧知识或历史记忆进行补全
  - 代码分析必须基于实际存在的源码，禁止脑补实现

### Rule-6: 原子化产出原则
- **原则**：所有产出必须符合标准原子格式
- **要求**：
  - 数学公式产出必须遵循`[Math_Atom]`格式
  - 代码实现产出必须遵循`[Code_Atom]`格式  
  - 场景验证产出必须遵循`[Scenario_Atom]`格式
  - 每个原子必须包含`asset_id`, `category`, `provenance`等标准字段

### Rule-7: 增量价值审计原则
- **原则**：新知识入库前必须进行Delta审计
- **要求**：
  - 强制检索`/atoms/`目录中已有的相似算子
  - 输出《增量对比表》，明确回答“本次更新相比已有资产提升了什么？”
  - 标记冲突点为`Contradiction`，触发专项审计

### Rule-8: 工程落地可行性原则
- **原则**：所有技术分析必须考虑量产可行性
- **要求**：
  - 代码分析必须评估其在Orin-X等实车算力平台上的性能影响
  - 必须提供`[Performance_Note]`，基于算子复杂度（FLOPs/Memory Access）推导
  - 严禁凭空猜测时延或显存占用

### Rule-9: 安全边界挑战原则
- **原则**：算法必须经过物理极限测试
- **要求**：
  - 场景验证必须基于真实的AVP物理约束（地库H型立柱、环岛盲区、坡道光影跳变等）
  - 禁止生成“场景1”、“示例A”等虚假占位符
  - 每个风险点必须锚定具体的数学漏洞或代码缺陷

### Rule-10: 跨会话记忆握手原则
- **原则**：维护系统级技术演进记忆
- **要求**：
  - 每次会话开始必须读取`manifests/algorithm_atlas.md`
  - 会话结束时必须更新Atlas地图，记录复利增长百分比
  - 生成精简的会话摘要，便于下一次快速恢复记忆

## 质量保障规则

### Rule-11: 交叉验证要求
- **原则**：重要结论需从多个维度验证
- **要求**：
  - Scholar的数学推导与Code的源码实现必须逻辑一致
  - 出现偏差时自动触发“冲突专项调研”
  - 引用`Knowledge_Vault`的存量资产进行交叉验证

### Rule-12: 优先级顺序
- **原则**：原始出处 > 权威解读 > 工程经验
- **要求**：
  - 优先基于论文原文和源码分析
  - 其次参考官方技术文档或工程手册
  - 最后结合工程实践经验进行补充

### Rule-13: 输出标准化要求
- **原则**：生成标准化的原子输出，便于系统解析
- **要求**：
  - 遵循预定义的JSON原子格式
  - 包含所有必需字段（`asset_id`, `category`, `provenance`, `content`等）
  - JSON必须可解析，字段类型正确

## 容错与健壮性规则

### Rule-14: 空结果处理
- **原则**：搜索结果为空时直接回复“无法获取真实数据”
- **要求**：
  - 允许空结果，不得编造内容填充
  - 如果确实没有新内容，可报告“文献未提供此细节”
  - 保持诚实，避免幻觉

### Rule-15: 错误透明记录
- **原则**：处理数据问题时必须透明记录
- **要求**：
  - 不得隐藏问题，在报告中注明数据质量
  - 记录验证失败、访问问题、数据不一致
  - 在原子中标记`data_status`字段（如：`Verified_Source_Anchored`）

### Rule-16: 目录自动创建
- **原则**：若目录不存在，自动创建
- **要求**：
  - 确保`/atoms/`、`/manifests/`、`/reports/`路径有效
  - 避免文件写入失败
  - 创建后检查目录权限和可写性

## 执行模式规则

### Rule-17: 意图优先原则
- **原则**：准确理解用户需求，选择最合适的执行模式
- **模式**：
  - `Deep_Internalization`：深度内化模式，全面解析
  - `Quick_Assessment`：快速评估模式，增量审计
  - `Engineering_Reproduction`：工程复现模式，代码落地
- **判断**：基于用户输入关键词选择执行策略

### Rule-18: 智能调度原则
- **原则**：支持并行、串行、混合三种执行模式
- **默认**：并行模式（Scholar, Code, Validator同时执行 → Critic汇总）
- **控制**：使用任务依赖关系实现智能调度

## 引用方式
在Agent提示词中使用以下格式引用本规则库：
```
## Rules
请遵守Thesis_Reading_System通用规则库中的所有约束，特别是数据真实性核心规则。
完整规则参见：`agents_system/common/common_rules.md`
```

## 版本与更新
- **版本**：1.0 (Thesis_Reading_System定制版)
- **创建时间**：2026-02-02
- **适用范围**：所有Thesis_Reading_System Agent
- **更新策略**：集中修改，所有Agent同步生效